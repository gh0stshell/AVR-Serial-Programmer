<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AVR Serial Programmer: serial-programmer-at90s2313.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>serial-programmer-at90s2313.h File Reference</h1><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="serial-programmer-at90s2313_8h__dep__incl.png" border="0" usemap="#serial-programmer-at90s2313_8hdep_map" alt=""/></div>
<map name="serial-programmer-at90s2313_8hdep_map" id="serial-programmer-at90s2313_8hdep">
<area shape="rect" href="serial-programmer-at90s2313_8c.html" title="serial&#45;programmer&#45;at90s2313.c" alt="" coords="5,83,203,112"/></map>
</div>

<p><a href="serial-programmer-at90s2313_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#a43bafb28b29491ec7f871319b5a3b2f8">F_CPU</a>&nbsp;&nbsp;&nbsp;8000000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#ad4455691936f92fdd6c37566fc58ba1f">BAUD_RATE</a>&nbsp;&nbsp;&nbsp;19200</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#a446fa9c3ea284b7bb176288e76224afb">FPAGESIZE</a>&nbsp;&nbsp;&nbsp;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#af84d1cf1a4c89acb120ef880ed2776d3">EPAGESIZE</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#a2dd443a4430713d325ab86895a4a45eb">SCK</a>&nbsp;&nbsp;&nbsp;PB7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#a7334c540878c8c4d801fd75ed9fd8063">MISO</a>&nbsp;&nbsp;&nbsp;PB6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#a5d3f11f2fdf8a7e27b975291e0c2c8cc">MOSI</a>&nbsp;&nbsp;&nbsp;PB5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#ab702106cf3b3e96750b6845ded4e0299">RESET</a>&nbsp;&nbsp;&nbsp;PB4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#a6e1e5cea4af5d10a196ddfa466aeeed0">PASSTHROUGH</a>&nbsp;&nbsp;&nbsp;PB3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#afa678c23621ac5239fcd790f4a7d5d65">LEDPROG</a>&nbsp;&nbsp;&nbsp;PB1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#aeb7a7ba1ab7e0406f1b5ab36d579f585">LED</a>&nbsp;&nbsp;&nbsp;PB0</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#a413d3237639fd946648120ff66920c03">BlockLoad</a> (const unsigned int size, const unsigned char mem, uint16_t *<a class="el" href="serial-programmer-at90s2313_8c.html#a643d30df67a67c5915fde941c934f9f8">address</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#af45ef568049e323789c04186ca5f7931">BlockRead</a> (const unsigned int size, const unsigned char mem, uint16_t *<a class="el" href="serial-programmer-at90s2313_8c.html#a643d30df67a67c5915fde941c934f9f8">address</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a block from application memory.  <a href="#af45ef568049e323789c04186ca5f7931"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#ad8a9ca95bd263ee8a63640e95bafd0ec">writeByte</a> (const uint8_t datum)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a Byte to the SPI.  <a href="#ad8a9ca95bd263ee8a63640e95bafd0ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#abba994466e676096fc3f0df7426bfd1b">writeCommand</a> (uint8_t, uint8_t, uint8_t, uint8_t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a four byte Programming command to the SPI.  <a href="#abba994466e676096fc3f0df7426bfd1b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial-programmer-at90s2313_8h.html#aecc1e1a2f637e90d4b74efa6e73e6d2c">pollDelay</a> (const uint8_t shortDelay)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delay loop for writes.  <a href="#aecc1e1a2f637e90d4b74efa6e73e6d2c"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ad4455691936f92fdd6c37566fc58ba1f"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::BAUD_RATE" ref="ad4455691936f92fdd6c37566fc58ba1f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAUD_RATE&nbsp;&nbsp;&nbsp;19200</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00018">18</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

</div>
</div>
<a class="anchor" id="af84d1cf1a4c89acb120ef880ed2776d3"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::EPAGESIZE" ref="af84d1cf1a4c89acb120ef880ed2776d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EPAGESIZE&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00023">23</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43bafb28b29491ec7f871319b5a3b2f8"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::F_CPU" ref="a43bafb28b29491ec7f871319b5a3b2f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_CPU&nbsp;&nbsp;&nbsp;8000000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00016">16</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

</div>
</div>
<a class="anchor" id="a446fa9c3ea284b7bb176288e76224afb"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::FPAGESIZE" ref="a446fa9c3ea284b7bb176288e76224afb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FPAGESIZE&nbsp;&nbsp;&nbsp;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00021">21</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

</div>
</div>
<a class="anchor" id="aeb7a7ba1ab7e0406f1b5ab36d579f585"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::LED" ref="aeb7a7ba1ab7e0406f1b5ab36d579f585" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED&nbsp;&nbsp;&nbsp;PB0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00032">32</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00143">main()</a>.</p>

</div>
</div>
<a class="anchor" id="afa678c23621ac5239fcd790f4a7d5d65"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::LEDPROG" ref="afa678c23621ac5239fcd790f4a7d5d65" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDPROG&nbsp;&nbsp;&nbsp;PB1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00031">31</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7334c540878c8c4d801fd75ed9fd8063"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::MISO" ref="a7334c540878c8c4d801fd75ed9fd8063" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MISO&nbsp;&nbsp;&nbsp;PB6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00027">27</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00644">writeByte()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d3f11f2fdf8a7e27b975291e0c2c8cc"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::MOSI" ref="a5d3f11f2fdf8a7e27b975291e0c2c8cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOSI&nbsp;&nbsp;&nbsp;PB5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00028">28</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00644">writeByte()</a>.</p>

</div>
</div>
<a class="anchor" id="a6e1e5cea4af5d10a196ddfa466aeeed0"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::PASSTHROUGH" ref="a6e1e5cea4af5d10a196ddfa466aeeed0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PASSTHROUGH&nbsp;&nbsp;&nbsp;PB3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00030">30</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00143">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ab702106cf3b3e96750b6845ded4e0299"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::RESET" ref="ab702106cf3b3e96750b6845ded4e0299" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RESET&nbsp;&nbsp;&nbsp;PB4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00029">29</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00143">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a2dd443a4430713d325ab86895a4a45eb"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::SCK" ref="a2dd443a4430713d325ab86895a4a45eb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCK&nbsp;&nbsp;&nbsp;PB7</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00026">26</a> of file <a class="el" href="serial-programmer-at90s2313_8h_source.html">serial-programmer-at90s2313.h</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00143">main()</a>, and <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00644">writeByte()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a413d3237639fd946648120ff66920c03"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::BlockLoad" ref="a413d3237639fd946648120ff66920c03" args="(const unsigned int size, const unsigned char mem, uint16_t *address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char BlockLoad </td>
          <td>(</td>
          <td class="paramtype">const unsigned int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char&nbsp;</td>
          <td class="paramname"> <em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&nbsp;</td>
          <td class="paramname"> <em>address</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af45ef568049e323789c04186ca5f7931"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::BlockRead" ref="af45ef568049e323789c04186ca5f7931" args="(const unsigned int size, const unsigned char mem, uint16_t *address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlockRead </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&nbsp;</td>
          <td class="paramname"> <em>address</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a block from application memory. </p>
<p>There is no block read as such in the SPI interface, just do it byte by byte. This code allows the interface to reduce traffic by reading in a single transaction.</p>
<p>Take care that EEPROM addresses are given in bytes, while FLASH addresses are in words.</p>
<p>Note that the low byte is returned first, followed by the high byte. This differs from the 'R' command in which the high byte is returned first.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>size,:</em>&nbsp;</td><td>Size of the buffer in bytes </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mem,:</em>&nbsp;</td><td>Memory type ('E' or 'F') </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*address,:</em>&nbsp;</td><td>pointer to the memory address in bytes (EEPROM) or words (FLASH) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00611">611</a> of file <a class="el" href="serial-programmer-at90s2313_8c_source.html">serial-programmer-at90s2313.c</a>.</p>

<p>References <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00136">buffer</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00095">high</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00096">low</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00134">lsbAddress</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00135">msbAddress</a>, <a class="el" href="serial_8c_source.html#l00030">sendchar()</a>, and <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00677">writeCommand()</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00143">main()</a>.</p>

</div>
</div>
<a class="anchor" id="aecc1e1a2f637e90d4b74efa6e73e6d2c"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::pollDelay" ref="aecc1e1a2f637e90d4b74efa6e73e6d2c" args="(const uint8_t shortDelay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pollDelay </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>shortDelay</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delay loop for writes. </p>
<p>The target capability for polling the busy status is used to determine if this is to be used or if a fixed delay is needed. The delay is passed in the parameter.</p>
<p>The compiler has a problem with passing a parameter to _delay_ms, and memory usage bloats. So we need some fixed delays. Most likely _delay_us is too general and includes floats.</p>
<p>Note the datasheet labels the flag as RDY, when in fact it states later that it is the inverse, BSY, that is, wait until the flag drops to 0 before proceeding.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>shortDelay</em>&nbsp;</td><td>Is the delay short?: TRUE for FLASH (4.5ms) or FALSE for erase, EEPROM (9ms). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00699">699</a> of file <a class="el" href="serial-programmer-at90s2313_8c_source.html">serial-programmer-at90s2313.c</a>.</p>

<p>References <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00136">buffer</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00139">canCheckBusy</a>, and <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00677">writeCommand()</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00536">BlockLoad()</a>, and <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00143">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8a9ca95bd263ee8a63640e95bafd0ec"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::writeByte" ref="ad8a9ca95bd263ee8a63640e95bafd0ec" args="(const uint8_t datum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeByte </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>datum</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a Byte to the SPI. </p>
<p>Issue a write of a single byte on the SPI interface Note that the data is transmitted and received MSB first. Also note that the device is acting as a Master for the SPI bus,so MOSI is output and MISO is input.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>datum,:</em>&nbsp;</td><td>the byte to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>response: a byte read at the same time as the byte was written. </dd></dl>

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00644">644</a> of file <a class="el" href="serial-programmer-at90s2313_8c_source.html">serial-programmer-at90s2313.c</a>.</p>

<p>References <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00088">_BV</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00093">cbi</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00089">inb</a>, <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00027">MISO</a>, <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00028">MOSI</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00091">outb</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00094">sbi</a>, and <a class="el" href="serial-programmer-at90s2313_8h_source.html#l00026">SCK</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00677">writeCommand()</a>.</p>

</div>
</div>
<a class="anchor" id="abba994466e676096fc3f0df7426bfd1b"></a><!-- doxytag: member="serial&#45;programmer&#45;at90s2313.h::writeCommand" ref="abba994466e676096fc3f0df7426bfd1b" args="(uint8_t, uint8_t, uint8_t, uint8_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeCommand </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>parm1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>parm2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>parm3</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a four byte Programming command to the SPI. </p>
<p>Issue a write command on the SPI interface This returns responses which (usually) match the command, one byte delayed. The third byte read from the "start programming" command can be used to verify sync. Other read commands return the read value in the fourth byte.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cmd</em>&nbsp;</td><td>SPI Programming command </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parm1</em>&nbsp;</td><td>SPI Programming parameter 1 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parm2</em>&nbsp;</td><td>SPI Programming parameter 2 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parm3</em>&nbsp;</td><td>SPI Programming parameter 3 </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The global buffer four bytes with the data returned from the command </dd></dl>

<p>Definition at line <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00677">677</a> of file <a class="el" href="serial-programmer-at90s2313_8c_source.html">serial-programmer-at90s2313.c</a>.</p>

<p>References <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00136">buffer</a>, and <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00644">writeByte()</a>.</p>

<p>Referenced by <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00536">BlockLoad()</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00611">BlockRead()</a>, <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00143">main()</a>, and <a class="el" href="serial-programmer-at90s2313_8c_source.html#l00699">pollDelay()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Apr 6 09:29:40 2010 for AVR Serial Programmer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
